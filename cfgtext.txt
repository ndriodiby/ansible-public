

vars: 
    upgrade_ios_version: 12.2(55)SE12



  tasks:

    - name: CHECK CURRENT VERSION
      ios_facts:


    -  debug:
         msg:
         - "Current version is {{ansible_net_version}}"
         - " Upgrade version is 12.2-55.SE12"

    - debug:
        msg:
        - "ios image need to be upgraded"
      when: ansible_net_version != upgrade_ios_version



    - name: restarting the Device
      cli_command:
        command: reload
        prompt:
          - confirm
        answer:
          - 'Y'


    - name: Device reachability
      wait_for:
        host: "{{inventory_hostname}}"
        port: 22
        delay: 90
      delegate_to: localhost
